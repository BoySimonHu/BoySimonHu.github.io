---
title: iOS 关于架构的一些想法
date: 2020-08-15 13:27:55
tags: 周六叨叨叨-朋友之间的小分享
---
# iOS 关于架构的一些想法

## 什么是架构？
&emsp;&emsp;架构这个概念是源起于建筑学中。在软件设计中，架构又分了许多种类，有应用架构、企业架构 基础设施架构。其中我们现在这个阶段应该学习的就是`应用架构`，应用架构主要是一个以
<span style="border-bottom:1px dashed red;"> 解决某个特定的问题 </span>
为核心目标的内部结合结构。一般是为了某个业务需求为目标来进行设计的。

## 为什么要有架构？
&emsp;&emsp;很简单，一个分工不明确的团队，是没有什么发展前景的。单个人的能力和时间总是有限的，只有不同分工的人才可以更容易的组成一个完整的、稳固的、高效的团体。连踢足球都有不同的分位，更别说咱们软件开发了。   
&emsp;&emsp;回归到咱们日常的开发上来说，一个简单的可交互页面，你可以把所有的逻辑都放在VC下面，这对于需求的完成来说没什么问题。可是随着业务的膨胀，VC的代码也是会随之膨胀的。一个1000行代码，不提开发人员有多难去看，就单从架构的角度上来讲，也总是能找出来一堆问题的。

## How？
&emsp;&emsp;`一个不想成为架构师的程序员不是个好的穷人`  
#### 1. 确认和熟悉需求
&emsp;&emsp;我们平时开发的时候经常会在第一手拿到需求的时候，粗略的看几眼然后就开始紧锣密鼓的码代码了，这种时候我们的总体目标一般只有一个：`需求按时写完，功能可以实现`。对于结果向的公司来说，这并没有什么不对，但对于我们自身来说会直接导致一个直接问题，我们的技术并没有因为代码量的增加而提升，这种现象其实也就是大家常说的`写业务不能提升技术`。
&emsp;&emsp;想改变这种情况的话，我们在拿到需求的时候，应该学会慢下来。仔细的去理解需求，尝试懂得需求方的想法，并不同的和需求方反复沟通，保证自己可以精准的理解需求，为接下里对做需求拆分打下基础。俗话说得好，磨刀不费砍柴工。

#### 2. 需求拆分、系统分解
&emsp;&emsp;需求拆分可能大部分是产品去做，我们技术应该更加关注的是系统的分解。在拆分策略中，大致可以分为`纵向拆分`和`横向拆分`两种。  
- 纵向拆分。是从业务维度进行拆分。标准是按照业务的关联程度来决定，关联比较密切的业务适合拆分为一个子系统，而功能相对比较独立的业务适合单独拆成一个子组件。例如一个商品系统中，纵向拆分可以分为订单系统、用户系统、产品系统等。
- 横向拆分。从公共且独立功能维度拆分。标准是按照是否有公共的被多个其他模块调用，且依赖的资源独立不与其他业务耦合。还是一个商品系统，从横向可以将订单的增删改查单独拆出来作为公共组件，每个业务模块的调用方可以单独使用这个公共组件。  
&emsp;&emsp;纵向拆分主要从业务角度进行，根据业务分割为不同的子系统；而横向拆分侧重于原业务深入拆分，然后服务重组。

#### 3. 技术选型
&emsp;&emsp;对于我们客户端开发来说，这一步基本上是在选择实现需求的具体方案。例如使用MVC还是用MVVM，使用OC开发还是Swift开发等等一系列的方案。  
&emsp;&emsp;当我们选取具体的技术方案的时候，还是需要从业务的角度出发去进行思考。除了需要符合六大原则之外，还要考虑到是否和需求真正的契合。比如一个单纯的页面展示，本来一个简单点MVC就可以满足，非要用VIPER实现，这种是没有必要的。  
&emsp;&emsp;以我自身为例，在技术选型的时候，一般我会先确定一个目标。例如一个产品形态可复用情况下，我可能会以实现技术模块的可拓展和业务解耦为主要目标；一个有着固定流程的业务，我可能就会以实现流程细分、数据流共享等方面减少每个流程的副作用为主要目标。这一步其实是我们最能提升编码能力的地方。每次的需求大家都可以尝试着去使用不同的方案去实现自己的业务，从而摆脱`写业务不能提升技术`的窘境。

#### 4. 制定统一的规范
&emsp;&emsp;其实到了第三步，对于我们来说基本上就完成了对一个需求的架构，但是我们都是想成为架构师的程序猿们，所以身为架构师应该做的规范统一，我们也应该去尽量尝试。  
&emsp;&emsp;架构师不止要在技术上可以提供方案，也应该懂得组织协调和人员分工，需要制定统一的开发规范，让开发人员可以从不同的视角监测自己所负责的模块。

## 自己的一些想法
#### 关于写业务的程序员这个话题
&emsp;&emsp;和很多朋友沟通后发现，当一个业务需求和一个技术需求摆在你面前的时候，包括以前的我，大家都不愿意去触碰那个业务需求，理由就是业务需求不能提升自我的技术能力。但是仔细的去分析开发的现状，大部分的人都是在一个业务型的公司工作的，业务是企业存活的唯一标准，好的架构设计出来的意义就是更好的去做业务需求的开发。从12306的技术提升到阿里业务中台的概念推广，其实都是在服务于业务。所以对待业务开发，我个人现在是以开放的态度去接受的，再好的技术终归要落地到业务上。（当然，纯技术向的朋友当我没说）

#### 关于「斜杠」程序员的看法
&emsp;&emsp;此处的斜杠并不是说的兼职一类的东西，而是说很多程序员基本上都会接触多种开发语言。但是接触的多了就会有学而不精的感觉。从我个人的角度上来说，我会选取一个主要方向，开辟分支的主要目的也是更好的发展主要方向。在主要方向上可以闲庭信步的时候，再去攻克另一个高峰。  
&emsp;&emsp;例如我现在的主要发展的是iOS开发，那么我会选择学习js、python、ruby这些语言作为工具语言来辅助我做iOS开发。我在学习iOS的Rx和RAC的时候，我会去参考js上的一些语法帮助我理解函数式的一些概念，而且多数的语言之间都是有共通性的。从架构和设计模式的角度上来说，这些思想是没有技术栈的区分的，语言不同但思想共通。

#### 关于iOS的成长路径
个人对于iOS成长的路径上的「初中高架构师」的理解：
- 熟悉语言，找到自己的开发节奏      -->  初级
- 意识到设计模式的重要性，更注重自我的编码能力    -->  中级
- 对于自己开发的App可以进行整体的架构把控和性能把控   -->   高级
- 有自己成熟的性能优化方案，根据不同的业务场景可以做出正确的架构设计，拥有团队管理能力，可以对整个团队的技术发展进行把控  -->  架构师

## 所需的基础知识
#### 面向对象的六大原则
- [单一职责原则](https://blog.csdn.net/LoveLion/article/details/7536542)
- [开闭原则](https://blog.csdn.net/LoveLion/article/details/7537584)
- [依赖倒转原则](https://blog.csdn.net/LoveLion/article/details/7562783)
- [合成复用原则](https://blog.csdn.net/LoveLion/article/details/7563441)
- [迪米特法则](https://blog.csdn.net/LoveLion/article/details/7563445)
- [接口隔离原则](https://blog.csdn.net/LoveLion/article/details/7562842)

#### 设计模式
- [学习网站](https://refactoring.guru/)

## 最后的最后，留个两个问题
- 如何设计一个支付流程
- 如何设计一个设置中心（显示不同cell样式、点击cell响应不同的事件、cell加载不同的数据）